{
  "name": "Track Ingestion",
  "nodes": [
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "mode": "everyX",
              "value": 30,
              "unit": "minutes"
            }
          ]
        }
      },
      "name": "Trigger - Every 30min",
      "type": "n8n-nodes-base.cron",
      "position": [
        -320,
        0
      ],
      "id": "ae9a6108-7c36-485e-b378-a86e2bde6222",
      "typeVersion": 1
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.ingest_navidrome import NavidromeIngestionCLI\nimport os\nfrom pathlib import Path\n\n# Diagnostic output\nprint(f\"Current working directory: {os.getcwd()}\")\nprint(f\"Files in current dir: {os.listdir('.')}\")\nprint(f\"Absolute path of 'data': {Path('data').absolute()}\")\nprint(f\"Exists? {Path('data').exists()}\")\nprint(f\"PYTHONPATH: {os.getenv('PYTHONPATH')}\")\n\nreturn NavidromeIngestionCLI().execute()"
      },
      "name": "Ingest Navidrome Tracks",
      "type": "n8n-nodes-base.code",
      "position": [
        0,
        0
      ],
      "typeVersion": 2,
      "id": "navidrome-1"
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.ingest_spotify import SpotifyIngestionCLI\nimport os\nfrom pathlib import Path\n\n# Diagnostic output\nprint(f\"Current working directory: {os.getcwd()}\")\nprint(f\"Files in current dir: {os.listdir('.')}\")\nprint(f\"Absolute path of 'data': {Path('data').absolute()}\")\nprint(f\"Exists? {Path('data').exists()}\")\nprint(f\"PYTHONPATH: {os.getenv('PYTHONPATH')}\")\n\nreturn SpotifyIngestionCLI().execute()"
      },
      "name": "Ingest Spotify Tracks",
      "type": "n8n-nodes-base.code",
      "position": [
        304,
        0
      ],
      "typeVersion": 2,
      "id": "9ba9176e-2687-4d91-a3d9-5fe38d2f86f1"
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.consolidate_tracks import ConsolidateTracksCLI\nreturn ConsolidateTracksCLI().execute()"
      },
      "name": "Consolidate Tracks",
      "type": "n8n-nodes-base.code",
      "position": [
        608,
        0
      ],
      "typeVersion": 2,
      "id": "consolidate-1"
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.load_raw_tracks import LoadRawTracksCLI\nreturn LoadRawTracksCLI().execute()"
      },
      "name": "Load Raw Tracks",
      "type": "n8n-nodes-base.code",
      "position": [
        912,
        0
      ],
      "typeVersion": 2,
      "id": "5c68f21b-1fa5-427a-a268-d561ec12e4dc"
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.validate_data import ValidateDataCLI\nreturn ValidateDataCLI().execute()"
      },
      "name": "Validate Data",
      "type": "n8n-nodes-base.code",
      "position": [
        1216,
        0
      ],
      "typeVersion": 2,
      "id": "13fb8dcb-78d2-4a09-8219-2c3f25a00905"
    }
  ],
  "pinData": {},
  "connections": {
    "Trigger - Every 30min": {
      "main": [
        [
          {
            "node": "Ingest Navidrome Tracks",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ingest Navidrome Tracks": {
      "main": [
        [
          {
            "node": "Ingest Spotify Tracks",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ingest Spotify Tracks": {
      "main": [
        [
          {
            "node": "Consolidate Tracks",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Consolidate Tracks": {
      "main": [
        [
          {
            "node": "Load Raw Tracks",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Load Raw Tracks": {
      "main": [
        [
          {
            "node": "Validate Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "d575ba87-851c-4dbe-ab3a-55bfd72c6139",
  "meta": {
    "instanceId": "54c0cf3cf25339f8983f7849ce732761c1e918b158f178f5df591113703c6575"
  },
  "id": "dk9jQHRcOELyU2mcpzEad",
  "tags": []
}
