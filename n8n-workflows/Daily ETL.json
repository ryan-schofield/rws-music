{
  "name": "Daily ETL",
  "nodes": [
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.discover_mbz_artists import DiscoverMBZArtistsCLI\nreturn DiscoverMBZArtistsCLI().execute()"
      },
      "name": "Discover MBZ Artists",
      "type": "n8n-nodes-base.code",
      "position": [
        672,
        96
      ],
      "typeVersion": 2,
      "id": "c37f36f6-6ab3-4ad0-83eb-6ea2dd78fdad",
      "executeOnce": true,
      "disabled": true
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.fetch_mbz_artists import FetchMBZArtistsCLI\nreturn FetchMBZArtistsCLI().execute(limit=100, workers=5)"
      },
      "name": "Fetch MBZ Artists",
      "type": "n8n-nodes-base.code",
      "position": [
        896,
        96
      ],
      "typeVersion": 2,
      "id": "d47b6f1f-8637-44a7-9084-88d46a447d0f",
      "executeOnce": true,
      "alwaysOutputData": false,
      "disabled": true
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.parse_mbz_data import ParseMBZDataCLI\nreturn ParseMBZDataCLI().execute()"
      },
      "name": "Parse MBZ Data",
      "type": "n8n-nodes-base.code",
      "position": [
        1120,
        96
      ],
      "typeVersion": 2,
      "id": "8f5c7be8-8bbf-4696-9703-ff09b4ec5197",
      "executeOnce": true,
      "disabled": true
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.process_mbz_hierarchy import ProcessMBZHierarchyCLI\nreturn ProcessMBZHierarchyCLI().execute()"
      },
      "name": "Process MBZ Hierarchy",
      "type": "n8n-nodes-base.code",
      "position": [
        1344,
        96
      ],
      "typeVersion": 2,
      "id": "9ea2b604-ed1d-4f86-a38c-a38b80613c55",
      "executeOnce": true,
      "disabled": true
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.enrich_geography import EnrichGeographyCLI\nreturn EnrichGeographyCLI().execute()"
      },
      "name": "Enrich Geography",
      "type": "n8n-nodes-base.code",
      "position": [
        1568,
        96
      ],
      "typeVersion": 2,
      "id": "e11d3c39-43dc-4aeb-be87-5862f3a59595",
      "executeOnce": true,
      "disabled": true
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.update_mbids import UpdateMBIDsCLI\nreturn UpdateMBIDsCLI().execute()"
      },
      "name": "Update MBIDs",
      "type": "n8n-nodes-base.code",
      "position": [
        1792,
        96
      ],
      "typeVersion": 2,
      "id": "6151944d-a3bd-4639-ba93-4f1dcc05b932",
      "executeOnce": true,
      "disabled": true
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "from flows.cli.run_dbt import RunDBTCLI\nreturn RunDBTCLI().execute(command='build')"
      },
      "name": "Run dbt Build",
      "type": "n8n-nodes-base.code",
      "position": [
        2016,
        96
      ],
      "typeVersion": 2,
      "id": "e6ff9efc-df1c-4b9a-bf90-53018d6c3be3",
      "executeOnce": true,
      "disabled": true
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 2
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        96
      ],
      "id": "c63c1764-ffc4-47ef-9831-3273133b715c",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        448,
        96
      ],
      "id": "a791622f-3400-4180-9ac8-0aba39a3b6a1",
      "name": "Merge Spotify Outputs"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "BZ_oK8XJlA4WMhQE9b6IB",
          "mode": "list",
          "cachedResultUrl": "/workflow/BZ_oK8XJlA4WMhQE9b6IB",
          "cachedResultName": "Spotify Album Enrichment"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        224,
        192
      ],
      "id": "69308c73-da79-4ed1-ba23-98af2e9a0b7a",
      "name": "Call 'Spotify Album Enrichment'"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "W1j31on099RSbipqouRVm",
          "mode": "list",
          "cachedResultUrl": "/workflow/W1j31on099RSbipqouRVm",
          "cachedResultName": "Spotify Artist Enrichment"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        224,
        0
      ],
      "id": "e78c8ba1-9e9e-40d5-bfa0-ef7f2fb75b24",
      "name": "Call 'Spotify Artist Enrichment",
      "alwaysOutputData": false
    }
  ],
  "pinData": {},
  "connections": {
    "Discover MBZ Artists": {
      "main": [
        [
          {
            "node": "Fetch MBZ Artists",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch MBZ Artists": {
      "main": [
        [
          {
            "node": "Parse MBZ Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse MBZ Data": {
      "main": [
        [
          {
            "node": "Process MBZ Hierarchy",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process MBZ Hierarchy": {
      "main": [
        [
          {
            "node": "Enrich Geography",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enrich Geography": {
      "main": [
        [
          {
            "node": "Update MBIDs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update MBIDs": {
      "main": [
        [
          {
            "node": "Run dbt Build",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Call 'Spotify Album Enrichment'",
            "type": "main",
            "index": 0
          },
          {
            "node": "Call 'Spotify Artist Enrichment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Spotify Outputs": {
      "main": [
        [
          {
            "node": "Discover MBZ Artists",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'Spotify Album Enrichment'": {
      "main": [
        [
          {
            "node": "Merge Spotify Outputs",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Call 'Spotify Artist Enrichment": {
      "main": [
        [
          {
            "node": "Merge Spotify Outputs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "85f436ec-1004-4dd6-897a-dd2a28f7e841",
  "meta": {
    "instanceId": "fe0cdcb4af99c360c90455b1f1007a24ba2abc365db532c71df5662d52925885"
  },
  "id": "98lSkDAYkaO4Jcvc",
  "tags": []
}